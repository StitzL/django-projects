{% extends "admirals/base.html" %}

{% block title %}Commander, we're under attack!{% endblock %}
 
{% block content %}
{% csrf_token %}
<div class='square' id='a1'>1</div>
<div class='square' id='a2'>2</div>
<div class='square' id='b1'>3</div>
<div class='square' id='b2'>4</div>

<script type="text/javascript">
 $(function() {
 $('.square').click(function() {
 var fieldId = $(this).attr('id');
 $.ajax({
 type: "POST",
 url: "/game/",
 data: {
 'field' : $('#playerName').val(),
 'csrfmiddlewaretoken' : $("input[name=csrfmiddlewaretoken]").val(),
 'error' : ""
 },
 success: onError,
 dataType: 'json'
 });
 });
});

function onError(data, textStatus, jqXHR) {
 if (data.error) {
  $('#message').text(data.error); 
 }
}
</script>
{% endblock %}